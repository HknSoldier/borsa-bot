name: SNIPER V10 - GHOST MODE

on:
  schedule:
    # Pazartesi-Cuma aras覺, 06:45 UTC (09:45 TR) - 15:15 UTC (18:15 TR) aras覺 15 dakikada bir 癟al覺覺r.
    - cron: '*/15 6-15 * * 1-5'
  workflow_dispatch: # 襤stediin zaman manuel 癟al覺t覺rmak i癟in buton

jobs:
  run-sniper:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Haf覺zay覺 kaydetmek i癟in yazma izni veriyoruz

    steps:
      - name: Depoyu ek (Checkout)
        uses: actions/checkout@v3

      - name: Python Kurulumu
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: K羹t羹phaneleri Y羹kle
        run: |
          pip install pandas numpy yfinance requests tvdatafeed pytz

      - name: SNIPER V10 ALITIR
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_GROUP_ID: ${{ secrets.TELEGRAM_GROUP_ID }}
          SESSION_ID: ${{ secrets.SESSION_ID }}
        run: python app.py

      - name: Haf覺zay覺 G羹ncelle (Commit & Push)
        run: |
          git config --global user.name 'Sniper Bot'
          git config --global user.email 'bot@sniper.com'
          # Sadece haf覺za dosyas覺 deitiyse kaydet
          git add sinyal_hafizasi.json || true
          git commit -m " Haf覺za G羹ncellendi" || echo "Haf覺zada deiiklik yok"
          git push
